<div ng-controller="BGPASPathController" id="bgpView" class="ASPathView">

  <!-- THIS SECTION DISPLAYS ERRORS -->
  <div class="error-list col-lg-12" ng-show="api_errors.length > 0">
    <div class="alert alert-danger">
      <div ng-repeat="api_error in api_errors">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        {{api_error}}
      </div>
    </div>
  </div>

  <div class="split-view">
    <div class="col-lg-5 split-two left-column">
      <div class="input-container">
        <button class="btn btn-default btn-reset" id="btnReset" ng-click="reset()">
          <span class="glyphicon glyphicon-remove"></span>
          Reset
        </button>
        <input type='text' class="form-control as-input" id="as1" ng-model="as1_name"
               ng-keydown="onKeyDown('as1', $event)"
               placeholder="Source AS"
               typeahead="as_name for as_name in getSuggestions($viewValue)"
               typeahead-loading="loadingLocations"
               typeahead-no-results="noResults"
               typeahead-wait-ms="300"
               typeahead-on-select="onSelect('as1', $label)"/>
        <input type='text' class="form-control readonly" ng-model="as1_number" readonly />
      </div>
    </div>
    <div class="col-lg-2 middle-column">
      <div class="buttons">
        <button class="btn btn-default" ng-repeat="(key, button) in buttons" ng-class="{'btn-active': button.active}" ng-click="onButtonClick(key)">{{key}}</button>
      </div>
      <div id="asPaths">
        <div class="no-data" ng-if="asPaths.length === 0 && loadingASPaths">
          Loading...
        </div>
        <div class="no-data" ng-if="asPaths.length === 0 && !loadingASPaths">
          No data
        </div>
        <div class="as-path" ng-repeat="path in asPaths">
          <div class="dashed-line"></div>
          <div class="timestamp">
            <div class="date">{{path.date | date: "dd MMM yyyy"}}</div>
            <div class="time">{{path.date | date: "hh:mm"}}</div>
          </div>
          <div class="length">{{path.length}}</div>
          <!-- display the AS padding count on top (thanks to the z-index -->
          <div ng-repeat="(index, asInfo) in path.as_path" class="circle-position" ng-style="{left: asInfo.position}">
            <div class="as-node-count bg-{{ path.icon }}" ng-if="asInfo.count > 1">{{asInfo.count}}</div>
          </div>
          <!-- display the AS number -->
          <div ng-repeat="(index, asInfo) in path.as_path" class="circle" ng-style="{left: asInfo.position}"
               bmp-asn-model asn="{{asInfo.asn}}" change-url-on-click="loadASView(asInfo.asn)">
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-5 split-two right-column">
      <div class="input-container">
        <input type='text' class="form-control as-input" id="as2" ng-model="as2_name"
               ng-keydown="onKeyDown('as2', $event)"
               placeholder="Destination AS"
               typeahead="as_name for as_name in getSuggestions($viewValue)"
               typeahead-loading="loadingLocations"
               typeahead-no-results="noResults"
               typeahead-wait-ms="300"
               typeahead-on-select="onSelect('as2', $label)"/>
        <input type='text' class="form-control readonly" ng-model="as2_number" readonly />
      </div>
    </div>
    <div class="col-lg-12" id="btn-search-container">
      <button class="btn btn-default btn-search-connections" id="btnSearchConnections" ng-disabled="!readyToSearchConnections"
        ng-click="startSearch()">Search connections</button>
    </div>
  </div>

</div>
