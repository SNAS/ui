<div ng-controller="BGPController" id="bgpView" ng-init="obj={maximiseForceDirectedGraph:false}">

  <div class="main-page-search" ng-class="{hidden: obj.maximiseForceDirectedGraph}">
    AS Number or prefix:
    <input id="suggestions" type="text" size="25" ng-keypress="keypress($event)" ng-model="searchValue"
           placeholder="Search ..."
           typeahead="as_name for as_name in getSuggestions($viewValue)"
           typeahead-loading="loadingLocations"
           typeahead-no-results="noResults"
           typeahead-wait-ms="300"
           typeahead-on-select="onSelect($item, $model, $label)"/>
    <span class="help-block">Examples: 109, 1.0.128.0/17, 1.0.*</span>
    <button type="button" class="btn btn-sm right time-slider-toggle-button" ng-class="{'btn-success': !dateFilterOn, 'btn-danger': dateFilterOn}" ng-click="dateFilterOn = !dateFilterOn">
      <span class="glyphicon" ng-class="{'glyphicon-plus': !dateFilterOn, 'glyphicon-minus': dateFilterOn}"></span>
      Date/time filter
    </button>
    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>

    <div class="row">
      <div ng-show="nodata" class="col-md-4">
        <p ng-style="{'font-size': '20px', opacity: 0.5, align: center}">
          <i class="glyphicon glyphicon-remove"></i>
          No Results Found
        </p>
      </div>
    </div>

    <div ng-class="{hidden: !dateFilterOn}">
      <div class="separator"></div>

      <!-- date/time selector -->
      <div class="row">
        <div class="col-lg-2">
          <table class="table start-end">
            <tr>
              <th class="timestamp-label">Start:</th>
              <td class="input"><input type='text' class="form-control" id="startDatetimePicker"/></td>
              <td></td>
            </tr>
            <tr>
              <th class="timestamp-label">End:</th>
              <td class="input"><input type='text' class="form-control" id="endDatetimePicker"/></td>
              <td>
                <button class="btn btn-primary btn-xs btn-now" ng-click="setToNow()">now</button>
              </td>
            </tr>
            <tr>
              <th>Duration:</th>
              <td id="duration"></td>
            </tr>
          </table>
        </div>

        <div class="col-lg-10 time-slider">
          <div class="col-lg-1 btn-arrow">
            <span class="btn btn-default btn-xs" ng-click="leftArrow()"><span class="glyphicon glyphicon-arrow-left"></span></span>
          </div>
          <div class="col-lg-10 slider">
            <nvd3 options="previewGraph" data="previewGraphData"></nvd3>
            <div id="timeSelector"></div>
          </div>
          <div class="col-lg-1 btn-arrow">
            <span class="btn btn-default btn-xs" ng-click="rightArrow()"><span class="glyphicon glyphicon-arrow-right"></span></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="main-area row" ng-class="{hidden: obj.maximiseForceDirectedGraph}">
    <div class="table-container col-lg-12 merge-columns">
      <div class="col-lg-8">
        <h3>Prefixes originated and transitted per AS</h3>
        <nvd3 options="barChartOptions" data="barChartData" id="barChart"></nvd3>
      </div>

      <div class="col-lg-4">
        <h3>Controls
          <!--<button ng-if="!error" class="btn btn-success btn-xs right" ng-click="triggerDataUpdate()">trigger update from server</button>-->
          <div ng-if="!error" class="data-offset right">
            <span class="btn btn-default btn-xs" ng-click="previousData()"><span class="glyphicon glyphicon-arrow-left"></span></span>
            Results {{offset}} to {{offset+limit}}
            <span class="btn btn-default btn-xs" ng-click="nextData()"><span class="glyphicon glyphicon-arrow-right"></span></span>
          </div>
        </h3>

        <div class="loading-section">
          <div ng-show="loadingASList" bmp-loading loading-var="loadingASList"></div>
          <div class="grid" ui-grid-auto-resize ui-grid-resize-columns="true" ui-grid="asListGridOptions"
               ng-style="{'height': asListGridOptions.height}">
            <div class="watermark" ng-if="!asListGridOptions.data.length">No data available</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="main-area row">
    <div class="col-lg-12">
      <div class="table-container" id="forceDirectedGraph" data-ng-show="showDirectedGraph">
        <h3>
          AS Links
          <div class="maximise">
            <!--<button class="btn btn-default glyphicon glyphicon-resize-full" ng-if="!obj.maximiseForceDirectedGraph"></button>-->
            <button class="button btn-icon btn-maximise" ng-if="!obj.maximiseForceDirectedGraph" ng-click="obj.maximiseForceDirectedGraph = true">
              <span class="glyphicon glyphicon-resize-full"></span>
            </button>
            <!--<div class="glyphicon glyphicon-resize-small" ng-if="maximiseForceDirectedGraph"></div>-->
            <button class="button btn-icon btn-minimise" ng-if="obj.maximiseForceDirectedGraph" ng-click="obj.maximiseForceDirectedGraph = false">
              <span class="glyphicon glyphicon-resize-small"></span>
            </button>
          </div>
        </h3>
        <div class="nv-container">
          <nvd3 options="forceDirectedGraph.options" data="forceDirectedGraph.data" class="with-3d-shadow with-transitions"></nvd3>
          <div id="nodeTooltips" class="hideTooltip">
            <table>
              <tr ng-repeat="field in tooltipFields" id="field-{{field}}">
                <td class="field">{{field}}</td>
                <td class="value">-</td>
              </tr>
            </table>
          </div>
          <div class="zoom-buttons">
            <button aria-label="Zoom in" id="widget-zoom-in" class="btn-icon widget-zoom-button widget-zoom-in" ng-click="controlZoom('zoom_in')">
              <span class="glyphicon glyphicon-plus"></span>
            </button>
            <button aria-label="Zoom out" id="widget-zoom-out" class="btn-icon widget-zoom-button widget-zoom-out" ng-click="controlZoom('zoom_out')">
              <span class="glyphicon glyphicon-minus"></span>
              <div class="widget-zoom-button-divider"></div>
            </button>
          </div>
          <div class="legend">
            <div class="color-label">Unstable</div>
            <ul class="colors">
              <li ng-repeat="c in stabilityColors" style="background-color: {{c.color}}"></li>
            </ul>
            <div class="color-label">Stable</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>



