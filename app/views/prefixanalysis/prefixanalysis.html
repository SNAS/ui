<div ng-controller="PrefixAnalysisController">
  <!------------------PREFIXANALYSIS---------------->
  <div class="main-page-search">
    Prefix Number:
    <input type="text" ng-change="enterValue(value)" ng-model="value" placeholder="Search ..."/>
    <span class="help-block">Example: 209.212.8.0/24</span>
  </div>

  <h3 ng-show="nodata">No Prefix matches this search</h3>

  <div ng-show="!nodata">
    <div class="main-area row">
      <div class="col-lg-12">
        <div class="table-container">
          <h3>Prefix Information</h3>
          <pre class="preStyle" ng-bind-html="showPrefixInfo"></pre>
        </div>
      </div>
    </div>

    <div class="main-area row">
      <div class="col-lg-12">
        <div class="table-container" scrollable>
          <h3>Originating AS Information</h3>
          <pre class="preStyle" ng-bind-html="showValues"></pre>
        </div>
      </div>
    </div>

    <div class="main-area row">
      <div class="col-lg-12">
        <div class="table-container">
          <h3>All entries for prefix {{value}} stored in DB
            <button class="btn filter-button" ng-click="toggleFiltering()">Filter</button>
          </h3>
          <!--Angular Grid added here-->
          <!--<button ng-click="toggleFiltering()">Search</button>-->
          <div class="loading-section">
            <div ng-show="allPreLoad" bmp-loading loading-var="allPreLoad"></div>
            <div ui-grid="AllPrefixOptions" ui-grid-selection ui-grid-auto-resize ui-grid-resize-columns></div>
            <div ng-show="oneRowSelected" style="padding: 20px 40px 0px">
              <button id="updatesBtn" class="btn btn-sm btn-default" ng-click="selectUpdates()">Updates</button>
              <button id="withdrawsBtn" class="btn btn-sm btn-default" ng-click="selectWithdraws()">Withdraws</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div ng-show="isUpdatesSelected">
      <div class="main-area row">
        <div class="col-lg-12">
          <div class="table-container">
            <h3>History of prefix {{searchPrefix}} </h3>

              <div ng-style="{'padding-left': '25px'}" class="form-inline">
                <div class="form-group">
                  <select class="btn btn-primary btn-lg form-control"
                          ng-model="timeRange"
                          ng-options="timerange.label for timerange in timeranges track by timerange.range"
                          ng-change="selectTimeRange()">
                  </select>
                </div>

                <div class="form-group" ng-if="customisedTime">
                  <input type="text" ng-model="hours" ng-change="setHour(hours)" ng-style="{'width': '30px'}">
                </div>
                <div class="form-group" ng-if="customisedTime">
                  <span class="text-primary" ng-style="{'font-size':'18px'}">hours</span>
                </div>
                <div class="form-group">
                  <span class="text-primary" ng-style="{'font-size':'18px'}">
                    before
                  </span>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input type='text' class="form-control" id='endTimePicker'/>
                  <span class="input-group-addon">
                      <span style="cursor:pointer" ng-click="setToNow()">SET TO NOW</span>
                  </span>
                  </div>
                </div>
                <div class="form-group">
                  <span class="text-primary" ng-style="{'font-size': '18px'}">
                    ,  each circle is {{timeRange.value}} minutes
                  </span>
                </div>
                <div class="form-group">
                  <button class="btn btn-default" ng-click="findLastUpdates()">Find Last Updates</button>
                </div>
              </div>

              <div class="row loading-section">
                <div ng-show="loading" bmp-loading loading-var="loading" font-width="80"></div>
                <!--Selects BGP Peer please:-->
                <!--| orderBy : 'PeerName'-->
                <div style="padding: 25px 25px 25px 25px">
                  <div>
                    <div ng-show="showTip" class="watermark" ng-style="{'top': '0px', 'position': 'relative'}">
                      <span>Nothing changed in this time!</span>
                    </div>
                    <div>
                      <!--<d3-directive ng-model="data"></d3-directive>-->
                      <update-history ng-model="data"></update-history>
                    </div>
                  </div>

                  <div ui-grid="HistoryPrefixOptions" ui-grid-auto-resize ui-grid-selection ui-grid-resize-columns
                       ng-style="{height:HistoryPrefixOptions.height}" ng-if="HistoryPrefixOptions.data.length && showGrid">
                    <div class="watermark" ng-if="!HistoryPrefixOptions.data.length">Please select BGP Peer</div>
                  </div>
                  <br><br>

                  <div ng-bind-html="timelineHtml" ng-if="timelineData.length" class="timeline">
                  </div>

                  <!--<div ng-if="HistoryPrefixOptions.data.length && showGrid">-->
                    <!--<button id="showButton" ng-click="showModal()" class="btn btn-info">Show details</button>-->
                  <!--</div>-->
                </div>
              </div><!-- end of loading-section -->

          </div>
        </div>
      </div>
    </div>

    <div ng-show="isWithdrawsSelected">
      <div class="main-area row">
        <div class="col-lg-12">
          <div class="table-container">
            <div class="loading-section">
              <div ui-grid="WithdrawsOptions" ui-grid-auto-resize ui-grid-selection ui-grid-resize-columns
                   ng-style="{height:WithdrawsOptions.height}" ng-if="WithdrawsOptions.data.length">
                <div class="watermark" ng-if="!WithdrawsOptions.data.length">Please select BGP Peer</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


